<!--pages/register/register.wxml-->
<view class="register-container">
  <view class="register-header">
    <image class="logo" src="/images/profile.svg" mode="aspectFit"></image>
    <text class="title">代驾应用</text>
    <text class="subtitle">创建新账号</text>
  </view>

  <view class="register-form">
    <view class="form-item">
      <view class="label">用户名</view>
      <input 
        class="input" 
        type="text" 
        placeholder="请输入用户名"
        value="{{username}}"
        bindinput="onUsernameInput"
        maxlength="20"
      />
    </view>

    <view class="form-item">
      <view class="label">手机号（可选）</view>
      <input 
        class="input" 
        type="number" 
        placeholder="请输入手机号"
        value="{{phone}}"
        bindinput="onPhoneInput"
        maxlength="11"
      />
    </view>

    <view class="form-item">
      <view class="label">密码</view>
      <input 
        class="input" 
        type="password" 
        placeholder="请输入密码（至少6位）"
        value="{{password}}"
        bindinput="onPasswordInput"
        maxlength="20"
      />
    </view>

    <view class="form-item">
      <view class="label">确认密码</view>
      <input 
        class="input" 
        type="password" 
        placeholder="请再次输入密码"
        value="{{confirmPassword}}"
        bindinput="onConfirmPasswordInput"
        maxlength="20"
      />
    </view>

    <view class="form-item">
      <view class="label">用户角色</view>
      <view class="role-selector">
        <view 
          class="role-option {{role === '1' ? 'active' : ''}}"
          data-role="1"
          bindtap="selectRole"
        >
          <image class="role-icon" src="/images/profile.svg" mode="aspectFit"></image>
          <text class="role-text">乘客</text>
        </view>
        <view 
          class="role-option {{role === '2' ? 'active' : ''}}"
          data-role="2"
          bindtap="selectRole"
        >
          <image class="role-icon" src="/images/taxi.svg" mode="aspectFit"></image>
          <text class="role-text">司机</text>
        </view>
      </view>
    </view>

    <button 
      class="register-btn {{isLoading ? 'loading' : ''}}" 
      bindtap="handleRegister"
      disabled="{{isLoading}}"
    >
      {{isLoading ? '注册中...' : '注册'}}
    </button>

    <view class="register-footer">
      <text class="login-link" bindtap="goToLogin">
        已有账号？立即登录
      </text>
    </view>
  </view>

  <!-- 加载动画 -->
  <view class="loading-overlay" wx:if="{{isLoading}}">
    <view class="loading-spinner"></view>
  </view>
</view>
