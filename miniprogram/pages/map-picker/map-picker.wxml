<!--map-picker.wxml-->
<view class="map-container">
  <!-- åœ°å›¾ç»„ä»¶ -->
  <map
    id="map"
    class="map"
    longitude="{{longitude}}"
    latitude="{{latitude}}"
    scale="{{scale}}"
    markers="{{markers}}"
    bindtap="onMapTap"
    show-location="{{true}}"
  >
  </map>

  <!-- åœ°å€ä¿¡æ¯å¡ç‰‡ -->
  <view class="address-card">
    <view class="card-header">
      <text class="location-icon">ğŸ“</text>
      <text class="card-title">{{addressType === 'start' ? 'å‡ºå‘åœ°' : 'ç›®çš„åœ°'}}</text>
    </view>
    
    <view class="address-info">
      <view class="main-address">{{selectedAddress.name || 'è·å–ä½ç½®ä¸­...'}}</view>
      <view class="detail-address">{{selectedAddress.address || ''}}</view>
    </view>

    <!-- æç¤ºä¿¡æ¯ -->
    <view class="tip-info" wx:if="{{!selectedAddress.name}}">
      <text class="tip-text">ğŸ‘† ç‚¹å‡»åœ°å›¾é€‰æ‹©ä½ç½®</text>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæŒ‰é’® -->
  <view class="bottom-actions">
    <button class="locate-btn" bindtap="getCurrentLocation">
      <text class="btn-icon">ğŸ¯</text>
      <text class="btn-text">å®šä½</text>
    </button>
    
    <button 
      class="confirm-btn" 
      bindtap="confirmLocation"
      disabled="{{!selectedAddress.name}}"
    >
      ç¡®è®¤ä½ç½®
    </button>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-overlay" wx:if="{{isLoading}}">
    <view class="loading-content">
      <view class="loading-spinner"></view>
      <text class="loading-text">{{loadingText}}</text>
    </view>
  </view>
</view>
